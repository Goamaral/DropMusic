<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="true" />

    <constant name="struts.action.excludePattern" value="/ws"/>

    <package name="controllers" extends="struts-default">
        <interceptors>
            <interceptor name="authInterceptor" class="interceptor.AuthInterceptor" />
            <interceptor-stack name="dropStack">
                <interceptor-ref name="authInterceptor" />
                <interceptor-ref name="defaultStack" />
            </interceptor-stack>
        </interceptors>

        <default-interceptor-ref name="dropStack" />

        <default-action-ref name="general_index" />
        
        <global-results>
            <result name="auth_failed" type="redirectAction">general_index</result>
        </global-results>

        <!-- General Controller -->

        <action name="general_index" class="controllers.GeneralController" method="index">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">/general/index.jsp</result>
        </action>

        <!-- User Controller -->

        <action name="dropboxoauth" class="controllers.UserController" method="dropboxoauth">
            <result name="success" type="redirect">${url}</result>
        </action>

        <action name="dropboxoauth_redirect" class="controllers.UserController" method="dropboxoauth_redirect">
            <result name="success" type="redirectAction">user_dashboard</result>
            <result name="error" type="redirectAction">general_index</result>
        </action>


        <action name="user_associate_dropbox" class="controllers.UserController" method="associate_dropbox">
            <result name="success" type="redirectAction">user_dashboard</result>
            <result name="error" type="redirectAction">user_dashboard</result>
        </action>


        <action name="user_login" class="controllers.UserController" method="login">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">/user/login.jsp</result>
        </action>

        <action name="user_login_post" class="controllers.UserController" method="login_post">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success" type="redirectAction">user_dashboard</result>
            <result name="error">/user/login.jsp</result>
        </action>

        <action name="user_register" class="controllers.UserController" method="register">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">/user/register.jsp</result>
        </action>

        <action name="user_register_post" class="controllers.UserController" method="register_post">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success" type="redirectAction">general_index</result>
            <result name="error">/user/register.jsp</result>
        </action>

        <action name="user_dashboard" class="controllers.UserController" method="dashboard">
            <result name="success">/user/dashboard.jsp</result>
        </action>

        <action name="user_promote" class="controllers.UserController" method="promote">
            <result name="success">/user/promote.jsp</result>
        </action>

        <action name="user_promote_post" class="controllers.UserController" method="promote_post">
            <result name="success">/user/partials/promote.jsp</result>
            <result name="error">/user/partials/promote.jsp</result>
        </action>

        <action name="user_logout" class="controllers.UserController" method="logout">
            <result name="success" type="redirectAction">general_index</result>
        </action>

        <!-- Album Controller -->

        <action name="album_index" class="controllers.AlbumController" method="index">
            <result name="success">/album/index.jsp</result>
        </action>

        <action name="album_show" class="controllers.AlbumController" method="show">
            <result name="success">/album/show.jsp</result>
        </action>

        <action name="album_create" class="controllers.AlbumController" method="create">
            <result name="success">/album/create.jsp</result>
        </action>

        <action name="album_create_post" class="controllers.AlbumController" method="create_post">
            <result name="success" type="redirectAction">album_index</result>
            <result name="error">/album/create.jsp</result>
        </action>

        <action name="album_search" class="controllers.AlbumController" method="search">
            <result name="success">/album/search.jsp</result>
        </action>

        <action name="album_search_post" class="controllers.AlbumController" method="search_post">
            <result name="success">/album/partials/index.jsp</result>
        </action>

        <action name="album_edit" class="controllers.AlbumController" method="edit">
            <result name="success">/album/edit.jsp</result>
        </action>

        <action name="album_edit_post" class="controllers.AlbumController" method="edit_post">
            <result name="success" type="redirectAction">album_index</result>
            <result name="error">/album/edit.jsp</result>
        </action>

        <action name="album_delete" class="controllers.AlbumController" method="delete">
            <result name="success" type="redirectAction">album_index</result>
        </action>

            <!-- Album Critic Controller -->

            <action name="album_critics" class="controllers.AlbumController" method="critics">
                <result name="success">/album/critic/index.jsp</result>
            </action>

            <action name="album_critic_create" class="controllers.AlbumController" method="critic_create">
                <result name="success">/album/critic/create.jsp</result>
            </action>

            <action name="album_critic_create_post" class="controllers.AlbumController" method="critic_create_post">
                <result name="success" type="redirectAction">album_critics?album_id=${album_id}</result>
                <result name="error">/album/critic/create.jsp</result>
            </action>

            <action name="album_critic_show" class="controllers.AlbumController" method="critic_show">
                <result name="success">/album/critic/show.jsp</result>
                <result name="error">/album/critic/show.jsp</result>
            </action>

            <!-- Album Song Controller -->

            <action name="album_songs" class="controllers.AlbumController" method="songs">
                <result name="success">/album/song/index.jsp</result>
            </action>

            <action name="album_song_show" class="controllers.AlbumController" method="song_show">
                <result name="success">/album/song/show.jsp</result>
            </action>

            <action name="album_song_create" class="controllers.AlbumController" method="song_create">
                <result name="success">/album/song/create.jsp</result>
            </action>

            <action name="album_song_create_post" class="controllers.AlbumController" method="song_create_post">
                <result name="success" type="redirectAction">album_songs?album_id=${album_id}</result>
                <result name="error">/album/song/create.jsp</result>
            </action>

            <action name="album_song_edit" class="controllers.AlbumController" method="song_edit">
                <result name="success">/album/song/edit.jsp</result>
            </action>

            <action name="album_song_edit_post" class="controllers.AlbumController" method="song_edit_post">
                <result name="success" type="redirectAction">
                    <param name="actionName">album_song_show</param>
                    <param name="album_id">${album_id}</param>
                    <param name="song_id">${song_id}</param>
                </result>
                <result name="error">/album/song/edit.jsp</result>
            </action>

            <action name="album_song_delete" class="controllers.AlbumController" method="song_delete">
                <result name="success" type="redirectAction">
                    <param name="actionName">album_songs</param>
                    <param name="album_id">${album_id}</param>
                </result>
            </action>

                <action name="album_song_upload" class="controllers.AlbumController" method="song_upload">
                    <result name="success">/album/song/upload.jsp</result>
                </action>

                <action name="album_song_download" class="controllers.AlbumController" method="song_download">
                    <result name="success">/album/song/download.jsp</result>
                </action>

                <action name="album_song_share" class="controllers.AlbumController" method="song_share">
                    <result name="success">/album/song/share.jsp</result>
                </action>

                <!-- Album Song Artist Controller -->

                <action name="album_song_artists" class="controllers.AlbumController" method="song_artists">
                    <result name="success">/album/song/artist/index.jsp</result>
                </action>

                <action name="album_song_artist_add" class="controllers.AlbumController" method="song_artist_add">
                    <result name="success">/album/song/artist/add.jsp</result>
                </action>

                <action name="album_song_artist_add_post" class="controllers.AlbumController" method="song_artist_add_post">
                    <result name="success" type="redirectAction">
                        <param name="actionName">album_song_artists</param>
                        <param name="album_id">${album_id}</param>
                        <param name="song_id">${song_id}</param>
                    </result>
                    <result name="error" type="redirectAction">
                        <param name="actionName">album_song_artists</param>
                        <param name="album_id">${album_id}</param>
                        <param name="song_id">${song_id}</param>
                    </result>
                </action>

                <action name="album_song_artist_remove" class="controllers.AlbumController" method="song_artist_remove">
                    <result name="success">/album/song/artist/remove.jsp</result>
                </action>

                <action name="album_song_artist_remove_post" class="controllers.AlbumController" method="song_artist_remove_post">
                    <result name="success" type="redirectAction">
                        <param name="actionName">album_song_artists</param>
                        <param name="album_id">${album_id}</param>
                        <param name="song_id">${song_id}</param>
                    </result>
                </action>

                <!-- Album Song Genre Controller -->

                <action name="album_song_genres" class="controllers.AlbumController" method="song_genres">
                    <result name="success">/album/song/genre/index.jsp</result>
                </action>

                <action name="album_song_genre_add" class="controllers.AlbumController" method="song_genre_add">
                    <result name="success">/album/song/genre/add.jsp</result>
                </action>

                <action name="album_song_genre_add_post" class="controllers.AlbumController" method="song_genre_add_post">
                    <result name="success" type="redirectAction">
                        <param name="actionName">album_song_genres</param>
                        <param name="album_id">${album_id}</param>
                        <param name="song_id">${song_id}</param>
                    </result>
                    <result name="error" type="redirectAction">
                        <param name="actionName">album_song_genres</param>
                        <param name="album_id">${album_id}</param>
                        <param name="song_id">${song_id}</param>
                    </result>
                </action>

                <action name="album_song_genre_remove" class="controllers.AlbumController" method="song_genre_remove">
                    <result name="success">/album/song/genre/remove.jsp</result>
                </action>

                <action name="album_song_genre_remove_post" class="controllers.AlbumController" method="song_genre_remove_post">
                    <result name="success" type="redirectAction">
                        <param name="actionName">album_song_genres</param>
                        <param name="album_id">${album_id}</param>
                        <param name="song_id">${song_id}</param>
                    </result>
                </action>

                <action name="album_song_genre_create" class="controllers.AlbumController" method="song_genre_create">
                    <result name="success">/album/song/genre/create.jsp</result>
                </action>

                <action name="album_song_genre_create_post" class="controllers.AlbumController" method="song_genre_create_post">
                    <result name="success" type="redirectAction">
                        <param name="actionName">album_song_genre_add</param>
                        <param name="album_id">${album_id}</param>
                        <param name="song_id">${song_id}</param>
                    </result>
                    <result name="error">/album/song/genre/create.jsp</result>
                </action>

        <!-- Artist Controller -->

        <action name="artist_index" class="controllers.ArtistController" method="index">
            <result name="success">/artist/index.jsp</result>
        </action>

        <action name="artist_create" class="controllers.ArtistController" method="create">
            <result name="success">/artist/create.jsp</result>
        </action>

        <action name="artist_create_post" class="controllers.ArtistController" method="create_post">
            <result name="success" type="redirectAction">artist_index</result>
            <result name="error">/artist/create.jsp</result>
        </action>

        <action name="artist_search" class="controllers.ArtistController" method="search">
            <result name="success">/artist/search.jsp</result>
            <result name="error">/artist/search.jsp</result>
        </action>

        <action name="artist_search_post" class="controllers.ArtistController" method="search_post">
            <result name="success">/artist/partials/search.jsp</result>
        </action>

        <action name="artist_show" class="controllers.ArtistController" method="show">
            <result name="success">/artist/show.jsp</result>
        </action>

        <action name="artist_edit" class="controllers.ArtistController" method="edit">
            <result name="success">/artist/edit.jsp</result>
        </action>

        <action name="artist_edit_post" class="controllers.ArtistController" method="edit_post">
            <result name="success" type="redirectAction">artist_index</result>
            <result name="error">/artist/edit.jsp</result>
        </action>

        <action name="artist_delete" class="controllers.ArtistController" method="delete">
            <result name="success" type="redirectAction">artist_index</result>
        </action>

    </package>
</struts>

